<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Admin Menu</title>
  <style>
    body{font-family:system-ui,Segoe UI,Arial;margin:24px}
    table{border-collapse:collapse;width:100%}
    th,td{border:1px solid #ddd;padding:8px;text-align:left}
    th{background:#f5f5f5}
    .actions{display:flex;gap:8px}
    form{display:inline}
    button{cursor:pointer}
  </style>
</head>
<body>
  <h1>Admin Menu</h1>

  {% with msgs = get_flashed_messages(with_categories=false) %}
    {% if msgs %}
      <ul>
        {% for m in msgs %}<li>{{ m }}</li>{% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <table>
    <tr>
      <th>ID</th><th>Name</th><th>Price</th><th>Avail</th><th>Actions</th>
    </tr>
    {% for item in items %}
    <tr>
      <td>{{ item['id'] }}</td>
      <td>{{ item['name'] }}</td>
      <td>{{ item['price']|vnd }}</td>
      <td>
        {% if 'available' in item.keys() %}
          {{  'Yes' if item['available'] else 'No' }}
        {% else %}
          —
        {% endif %}
      </td>
      <td class="actions">
        <!-- Edit -->
        <a href="{{ url_for('admin_menu_edit', item_id=item['id']) }}">
          Edit
        </a>

        <!-- Toggle (POST) -->
        <form method="post" action="{{ url_for('admin_menu_toggle', item_id=item['id']) }}">
          <button type="submit">Toggle</button>
        </form>

        <!-- Delete (POST) -->
        <form method="post" action="{{ url_for('admin_menu_delete', item_id=item['id']) }}"
              onsubmit="return confirm('Delete this item?');">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>

  <p style="margin-top:16px"><a href="{{ url_for('menu') }}">⬅ Back to public menu</a></p>
</body>
</html>