{% extends "layout.html" %}
<label for="price">Price (VND)</label>
</div>
<div class="form-floating mb-3">
<select class="form-select" id="section_id" name="section_id" required>
<option value="" disabled {{ 'selected' if not item }}>Chooseâ€¦</option>
{% for s in sections or [] %}
<option value="{{ s.id }}" {{ 'selected' if item and item.section_id == s.id else '' }}>{{ s.name }}</option>
{% endfor %}
</select>
<label for="section_id">Section</label>
</div>
<div class="form-check form-switch mb-3">
<input class="form-check-input" type="checkbox" id="is_available" name="is_available" value="1" {{ 'checked' if (item and item.is_available) or (not item) else '' }}>
<label class="form-check-label" for="is_available">Available</label>
</div>
</div>
</div>


<div class="row g-3">
<div class="col-12 col-md-6">
<div class="form-floating mb-3">
<input type="text" class="form-control" id="photo" name="photo" placeholder="photo filename or URL" value="{{ item.photo if item else '' }}">
<label for="photo">Photo (filename or URL)</label>
</div>
</div>
<div class="col-12 col-md-6">
<div class="mb-2 small text-secondary">Preview</div>
<div class="ratio ratio-16x9 border rounded bg-light d-flex align-items-center justify-content-center overflow-hidden">
{% if item and item.photo %}
<img src="{{ url_for('static', filename='images/' ~ item.photo) if not ('http://' in item.photo or 'https://' in item.photo) else item.photo }}" class="img-fluid" alt="{{ item.name }}">
{% else %}
<div class="text-secondary">No image selected</div>
{% endif %}
</div>
</div>
</div>
</div>


<div class="card-footer d-flex justify-content-between align-items-center">
{% if item and item.id %}
<button type="submit" class="btn btn-primary">Update</button>
<a href="{{ url_for('delete_item', item_id=item.id) }}" class="btn btn-outline-danger" onclick="return confirm('Delete this item?')">Delete</a>
{% else %}
<button type="submit" class="btn btn-success">Create</button>
{% endif %}
</div>
</form>
</div>
{% endblock %}